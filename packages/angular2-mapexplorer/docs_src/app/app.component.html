<div>
   <div class="md-content">
        <mat-tab-group md-dynamic-height md-border-bottom>
            <mat-tab label="Chainscript JSON">
                <div class="md-content">
                    <div *ngIf="!segmentShowed['first']" layout="row">
                        <div class="with-json" flex="grow">
                            <textarea [(ngModel)]="json" md-maxlength="150" rows="20" md-select-on-focus></textarea>
                            <button md-flat-button aria-label="Format" (click)="format()">
                                Format
                            </button>
                        </div>
                        <st-map-validator [chainscript]="json"></st-map-validator>
                    </div>
                </div>
                <div *ngIf="!json" class="tip" layout>
                    <span flex>Enter Chainscript JSON</span>
                </div>
                <st-map-explorer [chainscript]="json" [refresh]="0" [name]=" 'first' " [onSegmentShow]="showSegmentCallback" [onSegmentHide]="hideSegmentCallback"></st-map-explorer>
            </mat-tab>                
            <mat-tab md-active="application && mapId" label="Stratumn Application">
                <div *ngIf="!segmentShowed['second']">
                    <div layout="row" class="md-content form" *ngIf="!application && !mapId">
                        <div layout="column" flex="40">
                            <label>Application</label>
                            <input [(ngModel)]="applicationInput">
                        </div>
                        <div layout="column" flex="40">
                            <label>Map ID</label>
                            <input [(ngModel)]="mapIdInput">
                        </div>
                        <button md-button class="primary" aria-label="Generate" (click)="generateMap()">
                            Generate Map
                        </button>
                    </div>
                    <div layout="row" class="md-content form" *ngIf="application && mapId">
                        <div layout="column" flex="grow">
                            <label>Application</label>
                            <span>{{application}}</span>
                        </div>
                        <div layout="column" flex="grow">
                            <label>Map ID</label>
                            <span>{{mapId}}</span>
                        </div>

                        <div layout="row">
                            <button md-button class="md-fab md-mini" aria-label="Refresh" (click)="refresh()">
                                <mat-icon md-font-library="material-icons">refresh</mat-icon>
                            </button>
                            <button md-button class="md-fab md-mini md-primary" aria-label="Edit" (click)="edit()">
                                <mat-icon md-font-library="material-icons">edit</mat-icon>
                            </button>
                        </div>
                    </div>
                </div>            
                <div class="tip" *ngIf="!application && !mapId" layout>
                    <span flex>Enter a Stratumn application name and Chain Map ID</span>
                </div>
                <st-map-explorer *ngIf="application && mapId" [application]="application" [mapId]="mapId" [refresh]="counter" [name]=" 'second' " [onSegmentShow]="showSegmentCallback" [onSegmentHide]="hideSegmentCallback"></st-map-explorer>
            </mat-tab>
        </mat-tab-group>
    </div>
    <svg>
        <marker id="triangle" viewBox="0 0 10 10" refX="0" refY="5" markerUnits="strokeWidth"
                markerWidth="4" markerHeight="3" orient="auto">
            <path fill="#CCCCCC" d="M 0 0 L 10 5 L 0 10 z" />
        </marker>
    </svg>
</div>
