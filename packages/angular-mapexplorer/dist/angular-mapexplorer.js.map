{"version":3,"file":null,"sources":["../src/hashToStringColor.js","../src/AceConfiguration.service.js","../src/ChainTreeBuilder.service.js","../src/MapValidator.service.js","../src/MapExplorer.controller.js","../src/functionArguments.filter.js","../src/index.js"],"sourcesContent":["function djb2(str) {\n  let hash = 5381;\n  for (let i = 0; i < str.length; i++) {\n    hash = ((hash << 5) + hash) + str.charCodeAt(i); /* hash * 33 + c */\n  }\n  return hash;\n}\n\nexport default function hashStringToColor(str) {\n  const hash = djb2(str);\n  const r = (hash & 0xFF0000) >> 16;\n  const g = (hash & 0x00FF00) >> 8;\n  const b = hash & 0x0000FF;\n  return `#${`0${r.toString(16)}`.substr(-2)\n  + `0${g.toString(16)}`.substr(-2) + `0${b.toString(16)}`.substr(-2)}`;\n}\n","export default class AceConfigurationService {\n  configure(editor) {\n    editor.setShowPrintMargin(false);\n    editor.$blockScrolling = Infinity;\n    editor.setOptions({\n      fontFamily: 'RationalTWText-Light, \\'Roboto Mono\\', monospace',\n      fontSize: '14'\n    });\n  }\n}\n","import { ChainTreeBuilder } from 'mapexplorer-core';\n\nexport default class ChainTreeBuilderService {\n  constructor($q) {\n    this.$q = $q;\n  }\n\n  getBuilder(element) {\n    return new ChainTreeBuilder(element);\n  }\n\n  build(builder, map, options) {\n    return this.$q.when(builder.build({\n      id: map.mapId,\n      applicationUrl: map.applicationUrl,\n      chainscript: map.chainscript\n    }, options));\n  }\n}\n\nChainTreeBuilderService.$inject = ['$q'];\n","import { ChainValidator } from 'mapexplorer-core';\n\nexport default class MapValidatorService {\n  constructor($q) {\n    this.$q = $q;\n  }\n\n  validate(chainscript) {\n    return this.$q.when(\n      new ChainValidator(chainscript).validate()\n    );\n  }\n}\n\nMapValidatorService.$inject = ['$q'];\n","export default class MapExplorer {\n\n  constructor($scope, AceConfigurationService) {\n    this.$scope = $scope;\n    this.displayed = 'state';\n    this.editors = [];\n\n    $scope.$watch(() => this.segment, () => {\n      if (this.segment) {\n        this.state = JSON.stringify(this.segment.link.state, undefined, 2);\n        this.segmentJSON = JSON.stringify(this.segment, undefined, 2);\n      }\n    });\n\n    this.aceLoaded = _editor => {\n      this.editors.push(_editor);\n      AceConfigurationService.configure(_editor);\n    };\n  }\n\n  show(segment, onHide) {\n    this.segment = segment;\n    this.onHide = onHide;\n    this.$scope.$parent.onSegmentShow(this.$scope.name);\n  }\n\n  display(tab) {\n    this.displayed = tab;\n\n    this.editors.forEach(editor => {\n      editor.resize();\n      editor.renderer.updateFull();\n    });\n  }\n\n  close() {\n    this.segment = null;\n    this.$scope.$parent.onSegmentHide(this.$scope.name);\n    this.onHide();\n  }\n}\n\nMapExplorer.$inject = ['$scope', 'AceConfigurationService'];\n","export default function filter(args = []) {\n  return args.map(arg => {\n    if (arg instanceof Object) {\n      return JSON.stringify(arg, undefined, 2);\n    }\n    return arg;\n  }).join(', ');\n}\n","import angular from 'angular';\n\nimport stMerklePathTree from './stMerklePathTree.directive';\nimport stMapExplorer from './stMapExplorer.directive';\nimport stMapValidator from './stMapValidator.directive';\nimport stPromiseLoader from './stPromiseLoader.directive';\nimport stTagColorPicker from './stTagColorPicker.directive';\nimport AceConfigurationService from './AceConfiguration.service';\nimport ChainTreeBuilderService from './ChainTreeBuilder.service';\nimport MapValidatorService from './MapValidator.service';\nimport MapExplorerController from './MapExplorer.controller';\nimport functionArguments from './functionArguments.filter';\n\nexport default angular.module('stratumn.angular-mapexplorer',\n  ['ngAnimate', 'material.components.autocomplete', 'material.components.button',\n    'material.components.icon', 'material.components.toolbar', 'ngSanitize',\n    'material.components.progressCircular', 'ngAria', 'mdColorPicker', 'ui.drop', 'ui.ace']\n)\n  .directive('stMapExplorer', stMapExplorer)\n  .directive('stMerklePathTree', stMerklePathTree)\n  .directive('stMapValidator', stMapValidator)\n  .directive('stPromiseLoader', stPromiseLoader)\n  .directive('stTagColorPicker', stTagColorPicker)\n  .service('AceConfigurationService', AceConfigurationService)\n  .service('ChainTreeBuilderService', ChainTreeBuilderService)\n  .service('MapValidatorService', MapValidatorService)\n  .controller('MapExplorerController', MapExplorerController)\n  .filter('functionArguments', () => functionArguments)\n  .name;\n\n"],"names":["djb2","str","hash","i","length","charCodeAt","hashStringToColor","r","g","b","toString","substr","AceConfigurationService","editor","setShowPrintMargin","$blockScrolling","Infinity","setOptions","ChainTreeBuilderService","$q","element","ChainTreeBuilder","builder","map","options","when","build","mapId","applicationUrl","chainscript","$inject","MapValidatorService","ChainValidator","validate","MapExplorer","$scope","displayed","editors","$watch","segment","state","JSON","stringify","link","undefined","segmentJSON","aceLoaded","push","_editor","configure","onHide","$parent","onSegmentShow","name","tab","forEach","resize","renderer","updateFull","onSegmentHide","filter","args","arg","Object","join","angular","module","directive","stMapExplorer","stMerklePathTree","stMapValidator","stPromiseLoader","stTagColorPicker","service","controller","MapExplorerController","functionArguments"],"mappings":"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"}