<div class="title" layout="row">
    <div class="header">
        <h1>Segment</h1>
        <h2>{{me.segment.meta.linkHash}}</h2>
    </div>
    <span flex></span>
    <md-button class="md-icon-button" aria-label="Close" ng-click="me.close()">
        <md-icon md-font-library="material-icons">close</md-icon>
    </md-button>
</div>
<div layout="row" class="body">
    <div class="menu">
        <ul>
            <li ng-class="{ active: me.displayed == 'state'}" ng-click="me.display('state')">State</li>
            <li ng-class="{ active: me.displayed == 'link' }" ng-click="me.display('link')">Link</li>
            <li ng-class="{ active: me.displayed == 'evidence' }" ng-click="me.display('evidence')">Evidence</li>
            <li ng-class="{ active: me.displayed == 'json' }" ng-click="me.display('json')">JSON</li>
        </ul>
    </div>
    <div class="content" flex-grow>
        <div ng-show="me.displayed == 'state'" flex-grow>
            <div ui-ace="{
                            useWrapMode: true,
                            onLoad: me.aceLoaded
                        }" ng-model="me.state" readonly></div>
        </div>
        <div ng-show="me.displayed == 'link'" class="link">
            <h4>Map ID</h4>
            <p>{{me.segment.link.meta.mapId}}</p>

            <h4>Agent Hash</h4>
            <p>{{me.segment.link.meta.agentHash}}</p>

            <h4>State Hash</h4>
            <p>{{me.segment.link.meta.stateHash}}</p>

            <h4>Previous Link hash</h4>
            <p>{{me.segment.link.meta.prevLinkHash}}</p>

            <h4>Action</h4>
            <p>{{me.segment.link.meta.action}}({{me.segment.link.meta.arguments.join(', ')}})</p>
        </div>
        <div ng-show="me.displayed == 'evidence'" layout-gt-sm="row" layout="column">
            <div class="info">
                <h4>State</h4>
                <p>{{me.segment.meta.evidence.state}}</p>
                <div ng-show="me.segment.meta.evidence.state === 'COMPLETE'">
                    <h4>Bitcoin Transaction</h4>
                    <p>
                        {{me.segment.meta.evidence.transactions['bitcoin:main']}}
                        <a target="_blank" ng-href="https://blockchain.info/tx/{{me.segment.meta.evidence.transactions['bitcoin:main']}}">View transaction on Blockchain.info</a>
                    </p>

                    <h4>Merkle root</h4>
                    <p>{{me.segment.meta.evidence.merkleRoot}}</p>
                </div>
            </div>
            <div class="merkle-path" ng-show="me.segment.meta.evidence.state === 'COMPLETE'">
                <h4>Merkle Path</h4>
                <st-merkle-path-tree merkle-path="me.segment.meta.evidence.merklePath"></st-merkle-path-tree>
            </div>
        </div>
        <div ng-show="me.displayed == 'json'">
            <div ui-ace="{
                            useWrapMode: true,
                            onLoad: me.aceLoaded
                        }" ng-model="me.segmentJSON" readonly></div>
        </div>
    </div>
</div>
